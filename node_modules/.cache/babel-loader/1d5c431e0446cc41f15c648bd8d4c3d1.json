{"ast":null,"code":"var _jsxFileName = \"/Users/arpecop/Desktop/auth/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Switch, Route, Link, Redirect } from 'react-router-dom';\nimport { Menu } from 'antd';\nimport { useRecoilValue } from 'recoil';\nimport { Amplify, Auth } from 'aws-amplify';\nimport Layout from './components/layout';\nimport Login from './components/Login/Login';\nimport SignUp from './components/Login/SignUp';\nimport Forgot from './components/Login/Forgot';\nimport Home from './components/Home';\nimport { loggedInUserData } from './utils/state';\nAmplify.configure({\n  aws_project_region: 'eu-west-1',\n  aws_cognito_identity_pool_id: 'eu-west-1:06863165-5b56-4598-8e87-cc9ae2895f39',\n  aws_cognito_region: 'eu-west-1',\n  aws_user_pools_id: 'eu-west-1_sk5LfmU4g',\n  aws_user_pools_web_client_id: '6d5of62ku9g4pcl2jpp0rcng67',\n  oauth: {}\n});\n\nconst App = () => {\n  const [selected, setSelected] = useState('home');\n  const user1 = useRecoilValue(loggedInUserData);\n  const userStorage = localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')) : {\n    sub: null\n  };\n  const user = user1.sub ? user1 : userStorage;\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCounter(counter => counter + 1);\n    }, 1000);\n    return () => {\n      clearInterval(interval);\n    };\n  }, []);\n\n  const logout = () => {\n    localStorage.setItem('user', JSON.stringify({\n      sub: null\n    })); // window.location.reload();\n  };\n\n  const handleClick = e => {\n    setSelected(e.key);\n  };\n\n  return /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Menu, {\n    onClick: handleClick,\n    selectedKeys: [selected],\n    mode: \"horizontal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }, \"\\u041D\\u0430\\u0447\\u0430\\u043B\\u043E\")), user.sub === null ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/app/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 15\n    }\n  }, \"\\u0412\\u0445\\u043E\\u0434\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/app/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 15\n    }\n  }, \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"forgot\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/app/forgot\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 15\n    }\n  }, \"\\u0417\\u0430\\u0431\\u0440\\u0430\\u0432\\u0435\\u043D\\u0430 \\u043F\\u0430\\u0440\\u043E\\u043B\\u0430\"))) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"logout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/\",\n    onClick: () => Auth.signOut().then(logout()),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 15\n    }\n  }, \"\\u0418\\u0437\\u0445\\u043E\\u0434\")))), /*#__PURE__*/React.createElement(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/app/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, user.sub === null ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, \"\\u0412\\u0445\\u043E\\u0434\"), /*#__PURE__*/React.createElement(Login, {\n    type: \"full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  })) : /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/app/forgot\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Forgot, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/app/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(SignUp, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Home, {\n    user: user,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  })))));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/arpecop/Desktop/auth/src/App.js"],"names":["React","useState","useEffect","BrowserRouter","Router","Switch","Route","Link","Redirect","Menu","useRecoilValue","Amplify","Auth","Layout","Login","SignUp","Forgot","Home","loggedInUserData","configure","aws_project_region","aws_cognito_identity_pool_id","aws_cognito_region","aws_user_pools_id","aws_user_pools_web_client_id","oauth","App","selected","setSelected","user1","userStorage","localStorage","getItem","JSON","parse","sub","user","interval","setInterval","setCounter","counter","clearInterval","logout","setItem","stringify","handleClick","e","key","signOut","then"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  Redirect,\n} from 'react-router-dom';\nimport { Menu } from 'antd';\nimport { useRecoilValue } from 'recoil';\nimport { Amplify, Auth } from 'aws-amplify';\nimport Layout from './components/layout';\nimport Login from './components/Login/Login';\nimport SignUp from './components/Login/SignUp';\nimport Forgot from './components/Login/Forgot';\nimport Home from './components/Home';\nimport { loggedInUserData } from './utils/state';\n\nAmplify.configure({\n  aws_project_region: 'eu-west-1',\n  aws_cognito_identity_pool_id:\n    'eu-west-1:06863165-5b56-4598-8e87-cc9ae2895f39',\n  aws_cognito_region: 'eu-west-1',\n  aws_user_pools_id: 'eu-west-1_sk5LfmU4g',\n  aws_user_pools_web_client_id: '6d5of62ku9g4pcl2jpp0rcng67',\n  oauth: {},\n});\n\nconst App = () => {\n  const [selected, setSelected] = useState('home');\n  const user1 = useRecoilValue(loggedInUserData);\n  const userStorage = localStorage.getItem('user')\n    ? JSON.parse(localStorage.getItem('user'))\n    : { sub: null };\n  const user = user1.sub ? user1 : userStorage;\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCounter((counter) => counter + 1);\n    }, 1000);\n\n    return () => {\n      clearInterval(interval);\n    };\n  }, []);\n\n  const logout = () => {\n    localStorage.setItem('user', JSON.stringify({ sub: null }));\n    // window.location.reload();\n  };\n  const handleClick = (e) => {\n    setSelected(e.key);\n  };\n  return (\n    <Router>\n      <Menu onClick={handleClick} selectedKeys={[selected]} mode=\"horizontal\">\n        <Menu.Item key=\"home\">\n          <Link to=\"/\">Начало</Link>\n        </Menu.Item>\n        {user.sub === null ? (\n          <>\n            <Menu.Item key=\"login\">\n              <Link to=\"/app/login\">Вход</Link>\n            </Menu.Item>\n            <Menu.Item key=\"signup\">\n              <Link to=\"/app/signup\">Регистрация</Link>\n            </Menu.Item>\n            <Menu.Item key=\"forgot\">\n              <Link to=\"/app/forgot\">Забравена парола</Link>\n            </Menu.Item>\n          </>\n        ) : (\n          <>\n            <Menu.Item key=\"logout\">\n              <a href=\"/\" onClick={() => Auth.signOut().then(logout())}>\n                Изход\n              </a>\n            </Menu.Item>\n          </>\n        )}\n      </Menu>\n\n      <Layout>\n        <Switch>\n          <Route path=\"/app/login\">\n            {user.sub === null ? (\n              <>\n                <h1>Вход</h1>\n                <Login type=\"full\" />\n              </>\n            ) : (\n              <Redirect to=\"/\" />\n            )}\n          </Route>\n          <Route path=\"/app/forgot\">\n            <Forgot />\n          </Route>\n          <Route path=\"/app/signup\">\n            <SignUp />\n          </Route>\n          <Route path=\"/\">\n            <Home user={user} />\n          </Route>\n        </Switch>\n      </Layout>\n    </Router>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}
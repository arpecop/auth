{"version":3,"sources":["components/layout.js","utils/state.js","components/Error.js","components/Login/Login.js","components/Login/SignUp.js","components/Login/Forgot.js","utils/api.js","components/Home.js","App.js","index.js"],"names":["Layout","children","data","Helmet","title","meta","name","content","lang","style","margin","maxWidth","padding","paddingTop","loggedInUserData","atom","key","default","sub","email_verified","phone_number_verified","email","username","translated","UserNotFoundException","AuthError","CodeMismatchException","NotAuthorizedException","UsernameExistsException","PasswordNotMatch","InvalidParameterException","Empty","Error","props","Object","entries","map","val","description","message","type","styles","Input","height","width","formContainer","display","flexDirection","button","backgroundColor","cursor","textAlign","marginBottom","buttonText","color","Login","useRecoilState","user","setUser","useState","setUsername","password","setPassword","error","setError","login","a","Auth","signIn","currentAuthenticatedUser","user1","userInfo","attributes","localStorage","setItem","JSON","stringify","x","errorMessage","onChange","event","target","value","placeholder","InputCompact","buttonCompact","onClick","SignUp","authCode","stage","state","setState","handleUpdate","signUp","console","log","confirmSignUp","Forgot","validation","confirmPassword","forgotPassword","submitCode","changePassword","forgotPasswordSubmit","role","tabIndex","onKeyDown","href","env","api","query","json","token","axios","post","headers","Authorization","result","Promise","resolve","Home","hits","setData","useEffect","collection","limit","descending","fields","response","fetchData","Amplify","configure","aws_project_region","aws_cognito_identity_pool_id","aws_cognito_region","aws_user_pools_id","aws_user_pools_web_client_id","oauth","App","selected","setSelected","useRecoilValue","userStorage","getItem","parse","currentSession","test","accessToken","jwtToken","e","selectedKeys","mode","Item","to","signOut","then","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4c2eb0c2.chunk.js","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Helmet from \"react-helmet\";\nimport \"antd/dist/antd.css\"; // or 'antd/dist/antd.less'\nimport \"../css/main.css\";\n\nconst Layout = ({ children, data }) => (\n  <>\n    <Helmet\n      title={\"title\"}\n      meta={[\n        { name: \"description\", content: \"Sample\" },\n        { name: \"keywords\", content: \"sample, something\" },\n      ]}\n    >\n      <html lang=\"en\" />\n    </Helmet>\n\n    <div\n      style={{\n        margin: \"0 auto\",\n        maxWidth: 960,\n        padding: \"0px 1.0875rem 1.45rem\",\n        paddingTop: 0,\n      }}\n    >\n      {children}\n    </div>\n  </>\n);\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default Layout;\n","import { atom } from \"recoil\";\n\nexport const loggedInUserData = atom({\n  key: \"loggedInUser\",\n  default: {\n    sub: null,\n    email_verified: null,\n    phone_number_verified: null,\n    email: null,\n    username: null,\n  },\n});\n","import React from 'react';\nimport { Alert } from 'antd';\n\nconst translated = {\n  UserNotFoundException: 'Потребителя не съществува',\n  AuthError: 'Потребител или парола не могат да бъдат празни',\n  CodeMismatchException: 'Невалиден код , моля опитайте отново',\n  NotAuthorizedException: 'Потребител или парола невалидни',\n  UsernameExistsException: 'Потребителя съществува',\n  PasswordNotMatch: 'Паролите не съвпадат',\n  InvalidParameterException: 'Паролата трябва да е поне 6 символа',\n  Empty: '',\n};\n\nconst Error = (props) => (\n  <div>\n    {Object.entries(props).map(([err, val]) => (\n      <Alert\n        description={\n          translated[val.name]\n            ? translated[val.name]\n            : `${val.message}-${val.name}`\n        }\n        type=\"error\"\n      />\n    ))}\n  </div>\n);\n\nexport default Error;\n","import React, { useState } from 'react';\n\nimport { Auth } from 'aws-amplify';\nimport { useRecoilState } from 'recoil';\nimport { Input } from 'antd';\nimport { loggedInUserData } from '../../utils/state';\nimport Error from '../Error';\n\n//\n\nconst styles = {\n  Input: {\n    height: 40,\n    margin: '10px 0px',\n    padding: 7,\n    width: '100%',\n  },\n  formContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  button: {\n    backgroundColor: 'rebeccapurple',\n    padding: '15px 7px',\n    cursor: 'pointer',\n    textAlign: 'center',\n    marginBottom: 10,\n  },\n  buttonText: {\n    color: 'white',\n  },\n};\nconst Login = ({ type }) => {\n  const [user, setUser] = useRecoilState(loggedInUserData);\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState(null);\n\n  const login = async () => {\n    try {\n      await Auth.signIn(username, password);\n      const user1 = await Auth.currentAuthenticatedUser();\n      const userInfo = {\n        ...user1.attributes,\n        username: user1.username,\n      };\n      setUser(userInfo);\n\n      localStorage.setItem('user', JSON.stringify(userInfo));\n    } catch (err) {\n      setError(err);\n    }\n  };\n  return (\n    <>\n      {user.x && <Error errorMessage={error} />}\n      {error && <Error errorMessage={error} />}\n      {type === 'compact' && (\n        <>\n          <Input\n            onChange={(event) => setUsername(event.target.value)}\n            placeholder=\"Потребител\"\n            name=\"username\"\n            value={username}\n            style={styles.InputCompact}\n          />\n          <Input\n            onChange={(event) => setPassword(event.target.value)}\n            placeholder=\"Парола\"\n            name=\"password\"\n            value={password}\n            type=\"password\"\n            style={styles.InputCompact}\n          />\n          <div style={styles.buttonCompact} onClick={login}>\n            <span style={styles.buttonCompact}>Вход</span>\n          </div>\n        </>\n      )}\n      {type === 'full' && (\n        <>\n          <Input\n            onChange={(event) => setUsername(event.target.value)}\n            placeholder=\"Потребител\"\n            name=\"username\"\n            value={username}\n            style={styles.Input}\n          />\n          <Input\n            onChange={(event) => setPassword(event.target.value)}\n            placeholder=\"Парола\"\n            name=\"password\"\n            value={password}\n            type=\"password\"\n            style={styles.Input}\n          />\n          <div style={styles.button} onClick={login}>\n            <span style={styles.buttonText}>Вход</span>\n          </div>\n        </>\n      )}\n    </>\n  );\n};\n\nexport default Login;\n","import React, { useState } from 'react';\n\nimport { Auth } from 'aws-amplify';\nimport { Input } from 'antd';\nimport Error from '../Error';\nimport Login from './Login';\n\nconst SignUp = () => {\n  const [state, setState] = useState({\n    username: '',\n    password: '',\n    email: '',\n    authCode: '',\n    stage: 0,\n    error: '',\n  });\n  const handleUpdate = (event) => {\n    setState({\n      ...state,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  const signUp = async () => {\n    const { username, password, email } = state;\n    try {\n      await Auth.signUp({\n        username,\n        password,\n        attributes: { email },\n      });\n      setState({ ...state, stage: 1 });\n    } catch (err) {\n      setState({ ...state, error: err });\n      console.log('error signing up...', err);\n    }\n  };\n\n  const confirmSignUp = async () => {\n    const { username, authCode } = state;\n    try {\n      await Auth.confirmSignUp(username, authCode);\n      setState({ ...state, stage: 2, error: { name: 'Empty' } });\n    } catch (err) {\n      setState({ ...state, error: err });\n      console.log('error confirming signing up...', err);\n    }\n  };\n  return (\n    <div>\n      {state.stage === 0 && (\n        <div style={styles.formContainer}>\n          <h1>Регистрация</h1>\n          {state.error && <Error errorMessage={state.error} />}\n          <Input\n            onChange={handleUpdate}\n            placeholder=\"Потребител\"\n            name=\"username\"\n            value={state.username}\n            style={styles.Input}\n          />\n          <Input\n            onChange={handleUpdate}\n            placeholder=\"Парола\"\n            name=\"password\"\n            value={state.password}\n            type=\"password\"\n            style={styles.Input}\n          />\n          <Input\n            onChange={handleUpdate}\n            placeholder=\"Email\"\n            name=\"email\"\n            value={state.email}\n            style={styles.Input}\n          />\n\n          <div style={styles.button} onClick={signUp}>\n            <span style={styles.buttonText}>Sign Up</span>\n          </div>\n        </div>\n      )}\n      {state.stage === 1 && (\n        <div style={styles.formContainer}>\n          <h1>Регистрация</h1>\n          {state.error && <Error errorMessage={state.error} />}\n          <Input\n            onChange={handleUpdate}\n            placeholder=\"Authorization Code\"\n            name=\"authCode\"\n            value={state.authCode}\n            style={styles.Input}\n          />\n          <div style={styles.button} onClick={confirmSignUp}>\n            <span style={styles.buttonText}>Confirm Sign Up</span>\n          </div>\n        </div>\n      )}\n\n      {state.stage === 2 && (\n        <>\n          Регистрациятя успешна\n          <h1>Вход</h1>\n          <Login type=\"full\" />\n        </>\n      )}\n    </div>\n  );\n};\n\nconst styles = {\n  Input: {\n    height: 40,\n    margin: '10px 0px',\n    padding: 7,\n  },\n  formContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  button: {\n    backgroundColor: 'rebeccapurple',\n    padding: '15px 7px',\n    cursor: 'pointer',\n    textAlign: 'center',\n    marginBottom: 10,\n  },\n  buttonText: {\n    color: 'white',\n  },\n};\n\nexport default SignUp;\n","import React, { useState } from 'react';\n\nimport { Auth } from 'aws-amplify';\nimport { Input } from 'antd';\nimport Error from '../Error';\nimport Login from './Login';\n\nconst styles = {\n  Input: {\n    height: 40,\n    margin: '10px 0px',\n    padding: 7,\n    width: '100%',\n  },\n  formContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  button: {\n    backgroundColor: 'rebeccapurple',\n    padding: '15px 7px',\n    cursor: 'pointer',\n    textAlign: 'center',\n    marginBottom: 10,\n  },\n  buttonText: {\n    color: 'white',\n  },\n};\nconst Forgot = () => {\n  const [state, setState] = useState({\n    username: '',\n    error: '',\n    validation: '',\n    password: '',\n    confirmPassword: '',\n    stage: 0,\n  });\n  const login = async () => {\n    try {\n      await Auth.forgotPassword(state.username);\n\n      setState({ ...state, stage: 1 });\n    } catch (err) {\n      setState({ ...state, error: err });\n    }\n  };\n  const submitCode = () => {\n    setState({ ...state, stage: 2 });\n  };\n  const changePassword = async () => {\n    try {\n      if (state.password === state.confirmPassword) {\n        await Auth.forgotPasswordSubmit(\n          state.username,\n          state.validation,\n          state.password\n        );\n        setState({ ...state, stage: 3, error: { name: 'Empty' } });\n      } else {\n        setState({\n          ...state,\n          error: { name: 'PasswordNotMatch', message: \"Passwords don't Match\" },\n        });\n      }\n    } catch (err) {\n      setState({ ...state, error: err });\n    }\n  };\n  const handleUpdate = (event) => {\n    setState({\n      ...state,\n      [event.target.name]: event.target.value,\n    });\n  };\n  return (\n    <div>\n      <h1>Забвавена парола</h1>\n      {state.error && <Error errorMessage={state.error} />}\n\n      {state.stage === 0 && (\n        <div style={styles.formContainer}>\n          <Input\n            onChange={handleUpdate}\n            placeholder=\"Потребител\"\n            name=\"username\"\n            value={state.username}\n            style={styles.Input}\n          />\n\n          <div\n            role=\"button\"\n            tabIndex={0}\n            style={styles.button}\n            onClick={login}\n            onKeyDown={login}\n          >\n            <span style={styles.buttonText}>Нататък</span>\n          </div>\n        </div>\n      )}\n\n      {state.stage === 1 && (\n        <div>\n          <div>Провери имейла си за потвърждаващ код</div>\n          <Input\n            onChange={handleUpdate}\n            placeholder=\"потвърждаващ код\"\n            name=\"validation\"\n            value={state.validation}\n            style={styles.Input}\n          />\n          <div\n            role=\"button\"\n            tabIndex={0}\n            style={styles.button}\n            onClick={submitCode}\n            onKeyDown={submitCode}\n          >\n            <span style={styles.buttonText}>ОК</span>\n          </div>\n        </div>\n      )}\n\n      {state.stage === 2 && (\n        <div>\n          <Input\n            type=\"password\"\n            onChange={handleUpdate}\n            placeholder=\"new password\"\n            name=\"password\"\n            value={state.password}\n            style={styles.Input}\n          />\n          <br />\n          <Input\n            type=\"password\"\n            onChange={handleUpdate}\n            placeholder=\"confirm password\"\n            name=\"confirmPassword\"\n            value={state.confirmPassword}\n            style={styles.Input}\n          />\n\n          <div\n            role=\"button\"\n            tabIndex={0}\n            href=\"/\"\n            style={styles.button}\n            onClick={changePassword}\n            onKeyDown={changePassword}\n          >\n            <span style={styles.buttonText}>Смени</span>\n          </div>\n        </div>\n      )}\n      {state.stage === 3 && (\n        <>\n          <h1>Вход</h1>\n          <Login type=\"full\" />\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Forgot;\n","import axios from 'axios';\n\nconst env1 = {\n  development: {\n    api: 'https://47ruk9bopl.execute-api.eu-central-1.amazonaws.com/dev/',\n  },\n  production: {\n    api: 'https://47ruk9bopl.execute-api.eu-central-1.amazonaws.com/dev/',\n  },\n};\nexport const env = env1[process.env.NODE_ENV];\nexport const query = async (json, token) => {\n  const result = await axios.post(\n    env.api,\n    JSON.stringify(json),\n    {\n      headers: {\n        Authorization: `Bearer ${token}`,\n        'Content-Type': 'application/json',\n      },\n    },\n  );\n  return new Promise((resolve) => {\n    resolve(result);\n  });\n};\n","import React, { useEffect, useState } from 'react';\nimport { query } from '../utils/api';\n\nconst Home = ({ user }) => {\n  const [data, setData] = useState({ hits: [] });\n  useEffect(() => {\n    async function fetchData() {\n      const response = await query(\n        {\n          collection: 'newsbg',\n          limit: 1,\n          descending: false,\n          fields: ['title', 'image', 'vreme'],\n        },\n        'eyJraWQiOiJiZGRadUdBZE1QREl0RlwvRk9JTmlOdG9SQ3Z1R1Y3WitBYURkSjh2RDJ5cz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI3ODk0YTc3Ny04NDBmLTQxNDAtODRkOS1lMDIxNGYwNDU3NzAiLCJldmVudF9pZCI6IjhmNzI1MTM1LWEyNDEtNGQ3Yy1iMmQ2LTJhYmE1MzBjNDVlYiIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MDE1MzEzNzEsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX3NrNUxmbVU0ZyIsImV4cCI6MTYwMTUzNDk3MSwiaWF0IjoxNjAxNTMxMzcxLCJqdGkiOiJhMzU2YzgxOC1iOWQ4LTQ3ZDItOTFmYy0xMTMwOWYwYmE3M2YiLCJjbGllbnRfaWQiOiI2ZDVvZjYya3U5ZzRwY2wyanBwMHJjbmc2NyIsInVzZXJuYW1lIjoiYXJwZWNvcCJ9.IR_ULdj3vPK6t_Qpe2TAK5afteN_-Zub4iwfXTRe_OulaueW5cRYZoM6L98YMOQycHcwGyfa8UDxU1v9xB7F1RJ4TaKW1K_Pj50JyXjsG7sYtTxYemkUTpi86zIqPB79N8O4F4sdL3Y75MtKhdnH_os0O4U_Lq_0pZiwjDMtsSqSmHeNUfmSK790c2EZEGoWgyDal3pxvCD_qeP5nheseDbA3a__YYrXQHGNgL3AsTK6V_j1ccmbFDUIlFsdiXG8F5gGRBChgAGoGL6M2W9augmldQDMR9MRJBEeagnjB_TCzUSi9UbNG9WPvfLGJdorlTywmbNryLvh2l4Nz40stw',\n      );\n\n      setData(response.data);\n    }\n    fetchData();\n  }, []);\n  return (\n    <div>\n      <h1>Начало</h1>\n\n      {JSON.stringify(data)}\n    </div>\n  );\n};\n\nexport default Home;\n","import React, { useState, useEffect } from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  Redirect,\n} from 'react-router-dom';\nimport { Menu } from 'antd';\nimport { useRecoilValue } from 'recoil';\nimport { Amplify, Auth } from 'aws-amplify';\nimport Layout from './components/layout';\nimport Login from './components/Login/Login';\nimport SignUp from './components/Login/SignUp';\nimport Forgot from './components/Login/Forgot';\nimport Home from './components/Home';\nimport { loggedInUserData } from './utils/state';\n\nAmplify.configure({\n  aws_project_region: 'eu-west-1',\n  aws_cognito_identity_pool_id:\n    'eu-west-1:3f5f916d-2252-487f-99c0-7aa69115f973',\n  aws_cognito_region: 'eu-west-1',\n  aws_user_pools_id: 'eu-west-1_T6v05tjzh',\n  aws_user_pools_web_client_id: 'eqlretnsetkj5p57bqtandjqa',\n  oauth: {},\n});\n\nconst App = () => {\n  const [selected, setSelected] = useState('home');\n  const user1 = useRecoilValue(loggedInUserData);\n  const userStorage = localStorage.getItem('user')\n    ? JSON.parse(localStorage.getItem('user'))\n    : { sub: null };\n  const user = user1.sub ? user1 : userStorage;\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        const test = await Auth.currentSession();\n        console.log(test.accessToken.jwtToken);\n      } catch (err) {\n        console.log(err);\n      }\n      // setData(response.data);\n    }\n    fetchData();\n  }, []);\n\n  const logout = () => {\n    localStorage.setItem('user', JSON.stringify({ sub: null }));\n    // window.location.reload();\n  };\n  const handleClick = (e) => {\n    setSelected(e.key);\n  };\n  return (\n    <Router>\n      <Menu onClick={handleClick} selectedKeys={[selected]} mode=\"horizontal\">\n        <Menu.Item key=\"home\">\n          <Link to=\"/\">Начало</Link>\n        </Menu.Item>\n        {user.sub === null ? (\n          <>\n            <Menu.Item key=\"login\">\n              <Link to=\"/app/login\">Вход</Link>\n            </Menu.Item>\n            <Menu.Item key=\"signup\">\n              <Link to=\"/app/signup\">Регистрация</Link>\n            </Menu.Item>\n            <Menu.Item key=\"forgot\">\n              <Link to=\"/app/forgot\">Забравена парола</Link>\n            </Menu.Item>\n          </>\n        ) : (\n          <>\n            <Menu.Item key=\"logout\">\n              <a href=\"/\" onClick={() => Auth.signOut().then(logout())}>\n                Изход\n              </a>\n            </Menu.Item>\n          </>\n        )}\n      </Menu>\n\n      <Layout>\n        <Switch>\n          <Route path=\"/app/login\">\n            {user.sub === null ? (\n              <>\n                <h1>Вход</h1>\n                <Login type=\"full\" />\n              </>\n            ) : (\n              <Redirect to=\"/\" />\n            )}\n          </Route>\n          <Route path=\"/app/forgot\">\n            <Forgot />\n          </Route>\n          <Route path=\"/app/signup\">\n            <SignUp />\n          </Route>\n          <Route path=\"/\">\n            <Home user={user} />\n          </Route>\n        </Switch>\n      </Layout>\n    </Router>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { RecoilRoot } from 'recoil';\nimport App from './App';\n\nReactDOM.render(\n  <RecoilRoot>\n    <App />\n  </RecoilRoot>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}